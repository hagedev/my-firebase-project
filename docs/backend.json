{
  "entities": {
    "Tenant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tenant",
      "type": "object",
      "description": "Represents a cafe tenant in the AirCafe application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tenant entity."
        },
        "nama": {
          "type": "string",
          "description": "The name of the cafe. 'nama' instead of 'name'."
        },
        "slug": {
          "type": "string",
          "description": "A unique URL-friendly string identifying the cafe."
        },
        "logoUrl": {
          "type": "string",
          "description": "URL of the cafe's logo image.",
          "format": "uri"
        },
        "qrisImageUrl": {
          "type": "string",
          "description": "URL of the cafe's QRIS image for payments.",
          "format": "uri"
        },
        "tokenHarian": {
          "type": "string",
          "description": "The daily verification token for anti-spam."
        }
      },
      "required": [
        "nama",
        "slug",
        "tokenHarian"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a cafe admin user of the AirCafe application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity. This corresponds to the Firebase Auth UID."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. The ID of the tenant this user belongs to. (Relationship: Tenant 1:N User)"
        },
        "role": {
          "type": "string",
          "enum": ["admin_kafe"],
          "description": "The role of the user, which is admin_kafe."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "role",
        "email"
      ]
    },
    "Menu": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Menu",
      "type": "object",
      "description": "Represents a menu item offered by a cafe.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the menu item."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. The ID of the tenant that owns this menu item. (Relationship: Tenant 1:N Menu)"
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. The ID of the category this menu item belongs to. (Relationship: Category 1:N Menu)"
        },
        "name": {
          "type": "string",
          "description": "The name of the menu item."
        },
        "description": {
          "type": "string",
          "description": "A description of the menu item."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the menu item's image.",
          "format": "uri"
        },
        "price": {
          "type": "number",
          "description": "The price of the menu item."
        },
        "isAvailable": {
            "type": "boolean",
            "description": "The availability status of the menu item"
        },
        "variants": {
            "type": "array",
            "description": "List of variants for the menu item.",
            "items": {
                "type": "object",
                "properties": {
                    "name": {"type": "string"},
                    "additionalPrice": {"type": "number"}
                },
                "required": ["name", "additionalPrice"]
            }
        }
      },
      "required": [
        "tenantId",
        "categoryId",
        "name",
        "price",
        "isAvailable"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of menu items.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the category."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. The ID of the tenant that owns this category. (Relationship: Tenant 1:N Category)"
        },
        "name": {
          "type": "string",
          "description": "The name of the category."
        },
        "order": {
            "type": "number",
            "description": "The display order of the category."
        }
      },
      "required": [
        "tenantId",
        "name"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed by a customer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. The ID of the tenant that owns this order. (Relationship: Tenant 1:N Order)"
        },
        "tableNumber": {
          "type": "number",
          "description": "The table number where the order was placed."
        },
        "items": {
          "type": "array",
          "description": "Array of items in the order.",
          "items": {
            "type": "object",
            "properties": {
              "menuId": { "type": "string" },
              "name": { "type": "string" },
              "quantity": { "type": "number" },
              "price": { "type": "number" },
              "variant": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "additionalPrice": { "type": "number" }
                }
              }
            },
            "required": [
              "menuId",
              "name",
              "quantity",
              "price"
            ]
          }
        },
        "totalAmount": {
          "type": "number",
          "description": "The total amount of the order."
        },
        "paymentMethod": {
          "type": "string",
          "enum": [ "Cash", "QRIS" ],
          "description": "The payment method used for the order (e.g., Cash, QRIS)."
        },
        "paymentStatus": {
          "type": "string",
          "enum": [ "Unpaid", "Paid" ],
          "description": "The payment status of the order (e.g., Unpaid, Paid)."
        },
        "status": {
          "type": "string",
          "enum": [ "Received", "Preparing", "Ready", "Completed", "Cancelled" ],
          "description": "The status of the order (e.g., Received, Preparing, Ready)."
        },
        "verificationToken": {
          "type": "string",
          "description": "The verification token entered by the customer for anti-spam."
        },
        "uniqueCode": {
          "type": "string",
          "description": "Unique code added to total price, if payment method is QRIS"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "tenantId",
        "tableNumber",
        "items",
        "totalAmount",
        "paymentMethod",
        "paymentStatus",
        "status",
        "verificationToken",
        "createdAt"
      ]
    },
    "Table": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Table",
      "type": "object",
      "description": "Represents a table in a cafe.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the table."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. The ID of the tenant that owns this table. (Relationship: Tenant 1:N Table)"
        },
        "number": {
          "type": "number",
          "description": "The table number."
        },
        "status": {
          "type": "string",
          "enum": [ "Empty", "Occupied" ],
          "description": "The status of the table (e.g., Empty, Occupied)."
        }
      },
      "required": [
        "tenantId",
        "number",
        "status"
      ]
    },
    "SuperAdminRole": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SuperAdminRole",
      "type": "object",
      "description": "Defines the structure for a document in the roles_superadmin collection. This collection holds all data for super admin users.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The UID of the user who is a super admin."
        },
        "email": {
          "type": "string",
          "description": "The email address of the super admin.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "enum": ["superadmin"],
          "description": "The role of the user, which is always 'superadmin'."
        },
        "assignedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the role was assigned."
        }
      },
      "required": ["userId", "email", "role", "assignedAt"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/tenants/{tenantId}",
        "definition": {
          "schema": { "$ref": "#/entities/Tenant" },
          "description": "Stores cafe tenant profiles and configuration data."
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "schema": { "$ref": "#/entities/User" },
          "description": "Stores cafe admin user profiles."
        }
      },
      {
        "path": "/roles_superadmin/{userId}",
        "definition": {
          "schema": { "$ref": "#/entities/SuperAdminRole" },
          "description": "A collection where the document ID is the user's UID. This stores all data for super admin users and is used for role validation in security rules."
        }
      },
      {
        "path": "/tenants/{tenantId}/menus/{menuId}",
        "definition": {
          "schema": { "$ref": "#/entities/Menu" },
          "description": "Stores menu items for a specific tenant."
        }
      },
      {
        "path": "/tenants/{tenantId}/categories/{categoryId}",
        "definition": {
          "schema": { "$ref": "#/entities/Category" },
          "description": "Stores menu categories for a specific tenant."
        }
      },
      {
        "path": "/tenants/{tenantId}/orders/{orderId}",
        "definition": {
          "schema": { "$ref": "#/entities/Order" },
          "description": "Stores orders placed at a specific tenant."
        }
      },
      {
        "path": "/tenants/{tenantId}/tables/{tableId}",
        "definition": {
          "schema": { "$ref": "#/entities/Table" },
          "description": "Stores tables for a specific tenant."
        }
      }
    ]
  }
}
